apiVersion: apps/v1
kind: Deployment
metadata:
  namespace: networking
  name: cloudflare-ddns
spec:
  selector:
    matchLabels:
      app: cloudflare-ddns
  replicas: 1
  template:
    metadata:
      labels:
        app: cloudflare-ddns
    spec:
      containers:
      - name: cloudflare-ddns
        env:
        - name: "TZ"
          value: "Europe/Zurich"
        image: timothyjmiller/cloudflare-ddns:latest
        imagePullPolicy: Always
        resources:
          requests:
            cpu: 10m
            memory: 10Mi
          limits:
            cpu: 500m
            memory: 200Mi
        volumeMounts:
        - mountPath: /config.json
          name: cloudflare-ddns-config
          subPath: config.json
      volumes:
        - name: cloudflare-ddns-config
          secret:
            secretName: cloudflare-ddns-config
---
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  name: cloudflare-ddns-config
  namespace: networking
spec:
  encryptedData:
    config.json: AgA8mmkDJ3J6JUwg6M/Bs4JQhuX32bZA+mpC7fUGvw7eZ0IKrWyJW5Z9M+27WBtnvxRIrLxRhAxkeUBO9e4BZlxwF4r1L9HwqTctH39oizLG8POps+9pM7Cu9AFtZKKl1UF9BeOL5V3tUHMwyiOiwDwxtOVLMDvBwCfFpE1tqje5YyrhgvsaCZKBVi1zY/KwFG7Qr2ArIAdoV4AueBSNlosbOJzDYKA1vjgcb9Y1uxEcZHMbUcZiyRPQCdPqciL4LRlhZnOCom4ejsxk8rDw63yP/XpayIkFEDQw1G7/bMUXjKx7e6WJdHDAXhCBScqEEvfz8iwSgT+jZ6PeV6cXhGLOyt5sxZtn2viCtDWo/sdJr7KeCOwIzM2v63WEx4QgcMaWvgNcl9EiBmSrm9KDHKDz5U2uIQfdPcV+3neiAa7Ke4PlcqjuYuynqAmvtdcw9EFlYI9i32a1+1M9IiNBnQUWmRWMIDu/gKBBeg6nxYi27tzH5q4/i8s7za0SFwgr88VEcFPqD/aBBaIPQ3G+8Eh5X6ijV9AwxIGp8GYL9+VBkzDYXEEGbj0YnM8nGGCR0/qIHar9MuSA8vbgO4jNIcb3AAhM3wZydxRcpQthusKrfD6RZV4cDhKEv2PFTsrf1yMf4z74eVivIzQhyEY3+E5g5Wo0P1gpKdSz0YO098cwMDvjyr1go80A85rlNEYul6WNWFK/TFviooJW5fpT6sT+iCjVdlttv4VRUsLkxHhdAQAKd0rj1epHN3KIzlt/oZK1xvm3RYV8x1Tk6JNQm5hXKanQs/cj1PIJ1GdCBjUj2kixaVeUqaPV7x3BGW9uHLveCHzu1wdmEWE/jFxvJ1Z+LXOZlDt0KCOG+m3XHh+7xtsY7jZ4ktDsslSdgTvDvag3uIyHKCjJl0KgFp6cu0373sFRu24mPGc0G+7HSYIjtYqq9aQ/hPCIM/NV1gWYuhVMetQPalv9//x+U9HMMlHvP8GB7DcHhYB2SVFoDRsovNbAPCxyelSvT7xgWRH9y5BJlPiMe3MQLdf05nBqMon5XB586PP+XdESENcMkpo9jXUGIoHoYZeZW1sed3dL1IUCYc5YAffLNpr6YwcbHQv3BjUorHil3TcTsYM82lXm5Ey5pSXkBfUSJC1rmyfYQU4+fFpQ1KcTC/mGarBQC9WmX408zcK8XUsF+tIvvCfMCTEegKtInfF+2zAEwUtv+o/oqGCIqhh49TSgq5WpwLFVsBMoMPaFJOY4JSW6G7jCcG0PEtFVlw2n3CdH2ImpD7KuL4+42WU5yyGfX4xneVi8kEc6GjMTrnc7IRPz7hf2WtfA3dmVaDtudmAxsagNr0VdrXe4HR59ZWn3XbXNvC45BZbxU1vOTxCcXNxv9X9LrfQPzDTZi1iIMjhOemzz9VqsfEv0yhGwAa3Htp4a+0xY
  template:
    data: null
    metadata:
      name: cloudflare-ddns-config
      namespace: networking
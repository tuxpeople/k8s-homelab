apiVersion: monitoring.coreos.com/v1
kind: PodMonitor
metadata:
  name: linkerd-controller
spec:
  namespaceSelector:
    matchNames:
    - linkerd-viz
    - linkerd
  podMetricsEndpoints:
  - relabelings:
    - action: keep
      regex: admin-http
      sourceLabels:
      - __meta_kubernetes_pod_container_port_name
    - action: replace
      sourceLabels:
      - __meta_kubernetes_pod_container_name
      targetLabel: component
  selector:
    matchLabels: {}

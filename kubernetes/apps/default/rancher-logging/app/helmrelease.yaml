---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: rancher-logging
  namespace: default
spec:
  interval: 15m
  chart:
    spec:
      chart: rancher-logging
      version: 102.0.1+up3.17.10
      sourceRef:
        kind: HelmRepository
        name: rancher-charts-release-2-7
        namespace: flux-system
  maxHistory: 2
  install:
    createNamespace: true
    remediation:
      retries: 3
  upgrade:
    cleanupOnFail: true
    remediation:
      retries: 3
  uninstall:
    keepHistory: false
  dependsOn:
    - name: rancher-logging-crd
      namespace: default
  values:
    volumeMounts:
      - name: test-volume
        mountPath: /test
    volumes:
      - name: test-volume
        persistentVolumeClaim:
          claimName: test
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: test
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 25Gi
  storageClassName: local-path

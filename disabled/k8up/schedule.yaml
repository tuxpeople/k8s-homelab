---
apiVersion: backup.appuio.ch/v1alpha1
kind: Schedule
metadata:
  name: schedule-test
spec:
  backend:
    repoPasswordSecretRef:
      key: password
      name: backup-repo
    s3:
      accessKeyIDSecretRef:
        key: username
        name: backup-credentials
      bucket: k8up
      endpoint: http://minio.lab:9091
      secretAccessKeySecretRef:
        key: password
        name: backup-credentials
  backup:
    keepJobs: 4
    promURL: http://minio.lab:9091
    resources:
      limits:
        cpu: 1000m
        memory: 256Mi
      requests:
        cpu: 250m
        memory: 64Mi
    schedule: '* * * * *'
  check:
    promURL: http://minio.lab:9091
    resources:
      requests:
        cpu: 250m
        memory: 64Mi
    schedule: '@hourly-random'
  prune:
    retention:
      keepDaily: 14
      keepLast: 5
    schedule: '*/2 * * * *'
  resourceRequirementsTemplate:
    limits:
      cpu: 500m
      memory: 128Mi
    requests:
      cpu: 250m
      memory: 64Mi

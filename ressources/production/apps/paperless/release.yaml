apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: paperless
  namespace: paperless
spec:
  releaseName: paperless
  chart:
    spec:
      # version: "5.4.0"
      chart: paperless
      sourceRef:
        kind: HelmRepository
        name: k8s-at-home
        namespace: flux-system
  interval: 5m
  install:
    remediation:
      retries: 3
  values:
    env:
      TZ: "Europe/Zurich"
      PAPERLESS_OCR_LANGUAGE: "deu"
    image:
      pullPolicy: Always
    persistence:
      enabled: true
    # ingress:
    #   enabled: true
    #   hosts:
    #     - paperless.eighty-three.me
    #   annotations:
    #     kubernetes.io/ingress.class: traefik
    #     cert-manager.io/cluster-issuer: letsencrypt-production
    #     traefik.ingress.kubernetes.io/redirect-entry-point: https
    #   tls:
    #   - secretName: paperless-eighty-three-me-tls
    #     hosts:
    #       - paperless.eighty-three.me